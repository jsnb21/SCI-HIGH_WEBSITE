<!DOCTYPE html>
<html>
<head>
  <title>Game Stats</title>
</head>
<body>
  <h2>Leaderboards!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</h2>

  <!-- Div for player leaderboard -->
  <div id="playerRecordsContainer" style="padding: 20px;"></div>


  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD-Q2woACHgMCTVwd6aX-IUzLovE0ux-28",
      authDomain: "sci-high-website.firebaseapp.com",
      databaseURL: "https://sci-high-website-default-rtdb.asia-southeast1.firebasedatabase.app", // ✅ Added!
      projectId: "sci-high-website",
      storageBucket: "sci-high-website.appspot.com", // ✅ Corrected
      messagingSenderId: "451463202515",
      appId: "1:451463202515:web:e7f9c7bf69c04c685ef626"
  };
  
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();


    // / Function to display all player records from Firebase
    function displayAllPlayerRecords() {
      const db = firebase.database();
      
      db.ref('playerRecords')
        .orderByChild('score') // Order by score
        .once('value') 
        .then(snapshot => {
            const players = [];
            snapshot.forEach(childSnapshot => {
                players.push(childSnapshot.val());
            });
  
            players.reverse(); // High scores first
  
            const container = document.getElementById('playerRecordsContainer');
            if (!container) {
                console.warn('No container element found to display player records!');
                return;
            }
  
            container.innerHTML = ''; // Clear previous content
  
            players.forEach((player, index) => {
                const playerElement = document.createElement('div');
                playerElement.style.color = 'black';
                playerElement.style.marginBottom = '10px';
                playerElement.innerHTML = `
                    <strong>#${index + 1}</strong> 
                    Name: ${player.name} | 
                    Score: ${player.score} | 
                    HTML: ${player.htmlScore} | 
                    CSS: ${player.cssScore} | 
                    Python: ${player.pythonScore} | 
                    DS: ${player.dsScore} |
                    Clear Time: ${player.clearTime} |
                    Mistakes: ${player.mistakes} |
                    Rank: ${player.rank} |
                    Timestamp: ${new Date(player.timestamp).toLocaleString()}
                `;
                container.appendChild(playerElement);
            });
  
            console.log(`Displayed ${players.length} player records.`);
        })
        .catch(error => {
            console.error('Error fetching player records:', error);
        });
  }

  window.addEventListener('load', function() {
    displayAllPlayerRecords();
});

  
  </script>
</body>
</html>
